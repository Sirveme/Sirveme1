<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carta de {{ negocio.nombre_comercial }}</title>
    <link rel="stylesheet" href="/static/css/carta_virtual.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="main-container">
        <header class="carta-header">
            <img src="{{ brand_config.logo_url | default('/static/img/placeholder_logo.png') }}" alt="Logo" class="logo">
            <h1>{{ negocio.nombre_comercial }}</h1>
            <button id="theme-toggle-btn" class="theme-toggle">üåô</button>
        </header>
        <div class="chat-input-bar">
            <input type="text" id="chat-text-input" placeholder="Ingresa tu pedido aqu√≠...">
            <button class="mic-button" id="mic-button">
                <svg class="mic-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 18.75a6 6 0 006-6v-1.5a6 6 0 00-12 0v1.5a6 6 0 006 6zM12 2.25a.75.75 0 01.75.75v6a.75.75 0 01-1.5 0V3a.75.75 0 01.75-.75zM5.25 12.75a.75.75 0 01.75-.75h12a.75.75 0 010 1.5H6a.75.75 0 01-.75-.75zM12 15a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5A.75.75 0 0112 15z"></path></svg>
            </button>
        </div>
        <p class="menu-link-container"><a href="#" id="ver-menu-link">Ver men√∫ completo</a></p>
        <main class="order-main-view" id="order-main-view">
            <div class="carrito-container" id="carrito-container"></div>
            <div class="intro-placeholder" id="intro-placeholder"><p>Aqu√≠ aparecer√°n tus pedidos</p></div>
        </main>
        <footer class="carrito-footer" id="carrito-footer">
            <div class="carrito-summary">
                <span class="summary-text"><strong id="carrito-cantidad">0</strong> items</span>
                <div class="carrito-total"><span>Total:</span><strong id="carrito-total">S/ 0.00</strong></div>
            </div>
            <button type="button" class="btn-confirmar" id="btn-confirmar-pedido">Confirmar Pedido</button>
        </footer>
    </div>

    <section class="menu-section-wrapper" id="menu-section">
        <div class="menu-header">
            <a href="#" class="close-menu-btn" id="close-menu-btn">&times; Ocultar men√∫</a>
        </div>
        <nav class="category-nav" id="category-nav-menu">
            <!-- Las categor√≠as se insertar√°n aqu√≠ por JS -->
        </nav>
        <div class="menu-container" id="menu-container-items">
            <!-- Los productos del men√∫ se insertar√°n aqu√≠ por JS -->
        </div>
    </section>
    
    <div id="toast-notification" class="toast"></div>

    <!-- === MODAL DE PAGO (ESTRUCTURA COMPLETA Y FINAL) === -->
    <div class="modal-wrapper" id="modal-pago">
        <div class="modal-content">
            <h3 id="pago-modal-title">Selecciona tu M√©todo de Pago</h3>
            <div class="pago-resumen">
                <span>Total a Pagar:</span>
                <strong id="monto-total-pago">S/ 0.00</strong>
            </div>

            <!-- Paso 1: Selecci√≥n de M√©todo de Pago -->
            <div id="paso1-metodos" class="metodos-pago-grid">
                <button class="metodo-pago-btn efectivo" data-metodo="efectivo">
                    <!-- Icono SVG para Efectivo -->
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6"><path d="M4.5 3.75a3 3 0 00-3 3v.75h21v-.75a3 3 0 00-3-3h-15z" /><path fill-rule="evenodd" d="M22.5 9.75h-21v7.5a3 3 0 003 3h15a3 3 0 003-3v-7.5zm-18 3.75a.75.75 0 01.75-.75h6a.75.75 0 010 1.5h-6a.75.75 0 01-.75-.75zm.75 2.25a.75.75 0 000 1.5h3a.75.75 0 000-1.5h-3z" clip-rule="evenodd" /></svg>
                    <span>Efectivo</span>
                </button>
                <div class="metodos-digitales">
                    <button class="metodo-pago-btn yape" data-metodo="yape">
                         <!-- Icono SVG para Yape/Plin -->
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6"><path fill-rule="evenodd" d="M1.5 4.5a3 3 0 013-3h1.372c.86 0 1.61.586 1.819 1.42l1.105 4.423a1.875 1.875 0 01-.694 1.955l-1.293.97c-.135.101-.164.279-.087.431l4.28 7.433c.077.152.252.179.354.043l1.293-.97a1.875 1.875 0 011.955-.694l4.423 1.105c.834.209 1.42.959 1.42 1.82V19.5a3 3 0 01-3 3h-1.372c-.86 0-1.61-.586-1.819-1.42l-1.105-4.423a1.875 1.875 0 01.694-1.955l1.293-.97c.135-.101.164-.279.087-.431l-4.28-7.433c-.077-.152-.252-.179-.354-.043l-1.293.97a1.875 1.875 0 01-1.955.694l-4.423-1.105a1.875 1.875 0 01-1.82-1.42V4.5z" clip-rule="evenodd" /></svg>
                        <span>Yape</span>
                    </button>
                    <button class="metodo-pago-btn plin" data-metodo="plin">
                         <!-- Icono SVG para Yape/Plin -->
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6"><path fill-rule="evenodd" d="M1.5 4.5a3 3 0 013-3h1.372c.86 0 1.61.586 1.819 1.42l1.105 4.423a1.875 1.875 0 01-.694 1.955l-1.293.97c-.135.101-.164.279-.087.431l4.28 7.433c.077.152.252.179.354.043l1.293-.97a1.875 1.875 0 011.955-.694l4.423 1.105c.834.209 1.42.959 1.42 1.82V19.5a3 3 0 01-3 3h-1.372c-.86 0-1.61-.586-1.819-1.42l-1.105-4.423a1.875 1.875 0 01.694-1.955l1.293-.97c.135-.101.164-.279.087-.431l-4.28-7.433c-.077-.152-.252-.179-.354-.043l-1.293.97a1.875 1.875 0 01-1.955.694l-4.423-1.105a1.875 1.875 0 01-1.82-1.42V4.5z" clip-rule="evenodd" /></svg>
                        <span>Plin</span>
                    </button>
                </div>
                <button class="metodo-pago-btn tarjeta" data-metodo="tarjeta" disabled>
                    <!-- Icono SVG para Tarjeta -->
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6"><path d="M4.5 3.75a3 3 0 00-3 3v10.5a3 3 0 003 3h15a3 3 0 003-3V6.75a3 3 0 00-3-3h-15z" /><path d="M22.5 9v.75a.75.75 0 01-1.5 0V9h-18v.75a.75.75 0 01-1.5 0V9h21z" /></svg>
                    <span>Tarjeta D√©bito/Cr√©dito</span>
                    <small>(Pr√≥ximamente)</small>
                </button>
            </div>

            <!-- Paso 2: Formulario para Efectivo -->
            <div id="paso2-efectivo" class="pago-formulario" style="display: none;">
                <p>Un miembro de nuestro personal se acercar√° a cobrar. Por favor, ind√≠canos un nombre para llamar tu pedido.</p>
                <div class="input-group">
                    <label for="alias-cliente">Tu Nombre o Alias</label>
                    <input type="text" id="alias-cliente" placeholder="Ej: Juan P√©rez, 'El Capi'">
                </div>
                <div class="modal-actions">
                    <button type="button" id="btn-volver-metodos" class="btn-secondary">Volver</button>
                    <button type="button" id="btn-avisar-caja" class="btn-primary">Avisar a Caja</button>
                </div>
            </div>
            
            <!-- (Aqu√≠ ir√°n los formularios para Yape y Tarjeta en el futuro) -->
        </div>
    </div>

    <script src="/static/js/carta_virtual.js"></script>
</body>
</html>