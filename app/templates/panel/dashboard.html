{% extends "panel/panel_base.html" %}

{% block title %}Dashboard{% endblock %}

{% block content %}
<div class="page-header">
    <div>
        <h1>Dashboard</h1>
        <p class="subtitle">Resumen general de tu negocio • Última actualización: Hoy, 14:30</p>
    </div>
</div>

<!-- Sección de Widgets Principales -->
<div class="stats-grid">
    <div class="stat-card">
        <div class="card-icon icon-sales">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6v12m-3-2.818l.879.659c1.171.879 3.07.879 4.242 0l.879-.659M7.5 14.25l.879.659c1.171.879 3.07.879 4.242 0l.879-.659M7.5 8.25l.879.659c1.171.879 3.07.879 4.242 0l.879-.659M12 21a9 9 0 110-18 9 9 0 010 18z" /></svg>
        </div>
        <div class="card-content">
            <p>Ventas del Día</p>
            <h2>S/ {{ "%.2f"|format(dashboard_data.ventas_hoy) }}</h2>
            <span class="comparison positive">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 18L9 11.25l4.306 4.307a11.95 11.95 0 015.814-5.519l2.74-1.22m0 0l-3.182 3.182m3.182-3.182v4.5m-7.5a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                <span>+{{ dashboard_data.comparacion_ayer }}% vs ayer</span>
            </span>
        </div>
    </div>
    
    <!-- (Aquí irían las otras 3 tarjetas para Cuentas, Pedidos y Demoras) -->
    <!-- === NUEVAS TARJETAS DE ESTADÍSTICAS === -->
    <div class="stat-card">
        <div class="card-icon icon-orders">
            <svg>...</svg> <!-- Icono de Pedidos -->
        </div>
        <div class="card-content">
            <p>Pedidos Activos</p>
            <h2>{{ dashboard_data.pedidos_activos }}</h2>
            <span class="comparison">Promedio diario: {{ dashboard_data.promedio_diario }}</span>
        </div>
    </div>
    <div class="stat-card">
        <div class="card-icon icon-stock">
            <svg>...</svg> <!-- Icono de Alerta -->
        </div>
        <div class="card-content">
            <p>Alertas de Stock</p>
            <h2>{{ dashboard_data.alertas_stock }}</h2>
            <a href="#" class="card-link">Revisar inventario</a>
        </div>
    </div>
    <div class="stat-card">
        <div class="card-icon icon-clients">
            <svg>...</svg> <!-- Icono de Clientes -->
        </div>
        <div class="card-content">
            <p>Clientes Atendidos</p>
            <h2>{{ dashboard_data.clientes_atendidos }}</h2>
            <span class="comparison positive"><svg>...</svg>+8.3% vs ayer</span>
        </div>
    </div> 
</div>

<h2 class="section-title">Acciones Rápidas</h2>
<div class="quick-actions-grid">
    <a href="#" class="action-card">
        <div class="action-icon"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" /></svg></div>
        <h3>Nueva Venta</h3>
        <p>Registrar nueva orden</p>
    </a>
    <a href="/panel/productos" class="action-card">
        <div class="action-icon"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z" /></svg></div>
        <h3>Gestionar Productos</h3>
        <p>Ver y editar menú</p>
    </a>
    <a href="#" class="action-card">
        <div class="action-icon"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 3v11.25A2.25 2.25 0 006 16.5h12M3.75 3.75h16.5M3.75 12h16.5m-16.5 4.5h16.5" /></svg></div>
        <h3>Ver Reportes</h3>
        <p>Análisis detallados</p>
    </a>
    <a href="#" class="action-card">
        <div class="action-icon"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z" /></svg></div>
        <h3>Control Stock</h3>
        <p>Revisar inventario</p>
    </a>
</div>

<!-- === NUEVA SECCIÓN DE ACTIVIDAD RECIENTE === -->
<h2 class="section-title">Actividad Reciente</h2>
<div class="activity-feed">
    {% for item in actividad_reciente %}
    <div class="activity-item">
        <div class="activity-icon icon-{{ item.tipo }}">
            <svg>...</svg> <!-- Icono dinámico según el tipo -->
        </div>
        <div class="activity-content">
            <p class="description">{{ item.descripcion }}</p>
            <p class="details">
                {% if item.monto %}S/ {{ "%.2f"|format(item.monto) }}{% endif %}
                {% if item.detalle %}{{ item.detalle }}{% endif %}
            </p>
        </div>
        <span class="activity-time">{{ item.hace }}</span>
    </div>
    {% endfor %}
</div>
{% endblock %}